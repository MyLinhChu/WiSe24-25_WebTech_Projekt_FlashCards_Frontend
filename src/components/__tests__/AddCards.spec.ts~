import { describe, it, expect, vi } from 'vitest';
import { mount } from '@vue/test-utils';
import { createRouter, createMemoryHistory } from 'vue-router';
import { createTestingPinia } from '@pinia/testing';
import CreateDeckView from '../../views/CreateDeckView.vue';

describe('AddCards.vue', () => {
  it('adds a new card when the "Add Card" button is clicked', async () => {
    const router = createRouter({
      history: createMemoryHistory(),
      routes: [{ path: '/', name: 'home', component: CreateDeckView }],
    });

    const wrapper = mount(CreateDeckView, {
      global: {
        plugins: [router, createTestingPinia({ createSpy: vi.fn })],
        stubs: ['router-link'],
      },
    });

    // Überprüfen, ob eine Standardkarte beim Laden vorhanden ist
    expect(wrapper.findAll('input[placeholder="Question"]').length).toBe(1);

    // Klicken Sie auf die Schaltfläche zum Hinzufügen einer Karte
    const addButton = wrapper.find('button[type="button"]');
    await addButton.trigger('click');

    // Überprüfen, ob jetzt zwei Karten vorhanden sind
    expect(wrapper.findAll('input[placeholder="Question"]').length).toBe(2);
    expect(wrapper.findAll('input[placeholder="Answer"]').length).toBe(2);
  });
})

